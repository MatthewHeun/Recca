<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Chop the R and Y matrices and swim downstream/upstream — chop-doc • Recca</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Chop the R and Y matrices and swim downstream/upstream — chop-doc"><meta name="description" content="Chopping the resource (R) or final demand (Y) matrices
involves isolating products and industries then
swimming downstream/upstream to identify an energy conversion chain (ECC)
associated with each resource or final demand category.
These functions perform those calculations."><meta property="og:description" content="Chopping the resource (R) or final demand (Y) matrices
involves isolating products and industries then
swimming downstream/upstream to identify an energy conversion chain (ECC)
associated with each resource or final demand category.
These functions perform those calculations."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Recca</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.64</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/Recca.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Aggregation.html">Aggregation</a></li>
    <li><a class="dropdown-item" href="../articles/new-function-interaction.html">new_* function interactions</a></li>
    <li><a class="dropdown-item" href="../articles/new-functions.html">new_* functions</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MatthewHeun/Recca/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Chop the <strong>R</strong> and <strong>Y</strong> matrices and swim downstream/upstream</h1>
      <small class="dont-index">Source: <a href="https://github.com/MatthewHeun/Recca/blob/HEAD/R/chop.R" class="external-link"><code>R/chop.R</code></a></small>
      <div class="d-none name"><code>chop-doc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Chopping the resource (<strong>R</strong>) or final demand (<strong>Y</strong>) matrices
involves isolating products and industries then
swimming downstream/upstream to identify an energy conversion chain (ECC)
associated with each resource or final demand category.
These functions perform those calculations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">chop_Y</span><span class="op">(</span></span>
<span>  .sut_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  calc_pfd_aggs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  p_industries <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fd_sectors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  piece <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  notation <span class="op">=</span> <span class="fu">RCLabels</span><span class="fu">::</span><span class="va"><a href="https://matthewheun.github.io/RCLabels/reference/notations_list.html" class="external-link">notations_list</a></span>,</span>
<span>  pattern_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exact"</span>, <span class="st">"leading"</span>, <span class="st">"trailing"</span>, <span class="st">"anywhere"</span>, <span class="st">"literal"</span><span class="op">)</span>,</span>
<span>  prepositions <span class="op">=</span> <span class="fu">RCLabels</span><span class="fu">::</span><span class="va"><a href="https://matthewheun.github.io/RCLabels/reference/prepositions_list.html" class="external-link">prepositions_list</a></span>,</span>
<span>  unnest <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"solve"</span>, <span class="st">"QR"</span>, <span class="st">"SVD"</span><span class="op">)</span>,</span>
<span>  tol_invert <span class="op">=</span> <span class="va">.Machine</span><span class="op">$</span><span class="va">double.eps</span>,</span>
<span>  tol_chop_sum <span class="op">=</span> <span class="fl">1e-04</span>,</span>
<span>  R <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">R</span>,</span>
<span>  U <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">U</span>,</span>
<span>  U_feed <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">U_feed</span>,</span>
<span>  V <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">V</span>,</span>
<span>  Y <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">Y</span>,</span>
<span>  S_units <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">S_units</span>,</span>
<span>  chop_df <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="aggregate_cols.html">aggregate_cols</a></span><span class="op">$</span><span class="va">chop_df</span>,</span>
<span>  product_sector <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="aggregate_cols.html">aggregate_cols</a></span><span class="op">$</span><span class="va">product_sector</span>,</span>
<span>  aggregate_primary <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="aggregate_cols.html">aggregate_cols</a></span><span class="op">$</span><span class="va">aggregate_primary</span>,</span>
<span>  net_aggregate_demand <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="aggregate_cols.html">aggregate_cols</a></span><span class="op">$</span><span class="va">net_aggregate_demand</span>,</span>
<span>  gross_aggregate_demand <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="aggregate_cols.html">aggregate_cols</a></span><span class="op">$</span><span class="va">gross_aggregate_demand</span>,</span>
<span>  .prime <span class="op">=</span> <span class="st">"_prime"</span>,</span>
<span>  R_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">R</span>,</span>
<span>  U_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">U</span>,</span>
<span>  U_feed_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">U_feed</span>,</span>
<span>  U_eiou_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">U_eiou</span>,</span>
<span>  r_eiou_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">r_eiou</span>,</span>
<span>  V_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">V</span>,</span>
<span>  Y_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">Y</span>,</span>
<span>  S_units_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">S_units</span>,</span>
<span>  R_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">R_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  U_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">U_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  U_feed_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">U_feed_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  U_eiou_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">U_eiou_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  r_eiou_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">r_eiou_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  V_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">V_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  Y_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">Y_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  S_units_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">S_units_colname</span>, <span class="va">.prime</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">chop_R</span><span class="op">(</span></span>
<span>  .sut_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  calc_pfd_aggs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  p_industries <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fd_sectors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  piece <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  notation <span class="op">=</span> <span class="fu">RCLabels</span><span class="fu">::</span><span class="va"><a href="https://matthewheun.github.io/RCLabels/reference/notations_list.html" class="external-link">notations_list</a></span>,</span>
<span>  pattern_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exact"</span>, <span class="st">"leading"</span>, <span class="st">"trailing"</span>, <span class="st">"anywhere"</span>, <span class="st">"literal"</span><span class="op">)</span>,</span>
<span>  prepositions <span class="op">=</span> <span class="fu">RCLabels</span><span class="fu">::</span><span class="va"><a href="https://matthewheun.github.io/RCLabels/reference/prepositions_list.html" class="external-link">prepositions_list</a></span>,</span>
<span>  unnest <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"solve"</span>, <span class="st">"QR"</span>, <span class="st">"SVD"</span><span class="op">)</span>,</span>
<span>  tol_invert <span class="op">=</span> <span class="va">.Machine</span><span class="op">$</span><span class="va">double.eps</span>,</span>
<span>  tol_chop_sum <span class="op">=</span> <span class="fl">1e-04</span>,</span>
<span>  R <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">R</span>,</span>
<span>  U <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">U</span>,</span>
<span>  U_feed <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">U_feed</span>,</span>
<span>  V <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">V</span>,</span>
<span>  Y <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">Y</span>,</span>
<span>  S_units <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">S_units</span>,</span>
<span>  chop_df <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="aggregate_cols.html">aggregate_cols</a></span><span class="op">$</span><span class="va">chop_df</span>,</span>
<span>  product_sector <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="aggregate_cols.html">aggregate_cols</a></span><span class="op">$</span><span class="va">product_sector</span>,</span>
<span>  aggregate_primary <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="aggregate_cols.html">aggregate_cols</a></span><span class="op">$</span><span class="va">aggregate_primary</span>,</span>
<span>  net_aggregate_demand <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="aggregate_cols.html">aggregate_cols</a></span><span class="op">$</span><span class="va">net_aggregate_demand</span>,</span>
<span>  gross_aggregate_demand <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="aggregate_cols.html">aggregate_cols</a></span><span class="op">$</span><span class="va">gross_aggregate_demand</span>,</span>
<span>  .prime <span class="op">=</span> <span class="st">"_prime"</span>,</span>
<span>  R_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">R</span>,</span>
<span>  U_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">U</span>,</span>
<span>  U_feed_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">U_feed</span>,</span>
<span>  U_eiou_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">U_eiou</span>,</span>
<span>  r_eiou_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">r_eiou</span>,</span>
<span>  V_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">V</span>,</span>
<span>  Y_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">Y</span>,</span>
<span>  S_units_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="psut_cols.html">psut_cols</a></span><span class="op">$</span><span class="va">S_units</span>,</span>
<span>  R_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">R_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  U_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">U_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  U_feed_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">U_feed_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  U_eiou_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">U_eiou_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  r_eiou_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">r_eiou_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  V_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">V_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  Y_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">Y_colname</span>, <span class="va">.prime</span><span class="op">)</span>,</span>
<span>  S_units_prime_colname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">S_units_colname</span>, <span class="va">.prime</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--sut-data">.sut_data<a class="anchor" aria-label="anchor" href="#arg--sut-data"></a></dt>
<dd><p>A data frame or list of physical supply-use table matrices.
Default is <code>NULL</code>.</p></dd>


<dt id="arg-calc-pfd-aggs">calc_pfd_aggs<a class="anchor" aria-label="anchor" href="#arg-calc-pfd-aggs"></a></dt>
<dd><p>A boolean that tells whether (<code>TRUE</code>) or not (<code>FALSE</code>)
to include primary and final demand aggregates to the
nested data frame.</p></dd>


<dt id="arg-p-industries">p_industries<a class="anchor" aria-label="anchor" href="#arg-p-industries"></a></dt>
<dd><p>A vector of names of industries to be aggregated as "primary"
and used if aggregations are requested.
If <code>.sut_data</code> is a data frame, <code>p_industries</code> should be the name of a column in the data frame.
If <code>.sut_data</code> is <code>NULL</code>, <code>p_industries</code> can be a single vector of industry names.
These industries in <code>p_industries</code> will appear in rows of the resource (<strong>R</strong>) and make (<strong>V</strong>) matrices and
columns of the final demand matrix (<strong>Y</strong>).
Entries in <strong>Y_p</strong> will be subtracted from entries in <strong>R_p</strong> <code>+</code> <strong>V_p</strong> to obtain
the total primary energy aggregate,
where <code>*_p</code> is the primary part of those matrices.
The function <code><a href="find_p_industry_names.html">find_p_industry_names()</a></code> might be helpful to find
primary industry names if they can be identified by prefixes.
This argument is passed to <code><a href="primary_aggregates.html">primary_aggregates()</a></code>.
Default is <code>NULL</code>.</p></dd>


<dt id="arg-fd-sectors">fd_sectors<a class="anchor" aria-label="anchor" href="#arg-fd-sectors"></a></dt>
<dd><p>A vector of names of sectors in final demand
and used if aggregations are requested.
Names should include columns in the <strong>Y</strong> and <strong>U_EIOU</strong> matrices
to cover both net (in <strong>Y</strong>) and gross (in <strong>Y</strong> and <strong>U_EIOU</strong>) final demand.
This argument is passed to <code><a href="finaldemand_aggregates.html">finaldemand_aggregates()</a></code>.
Default is <code>NULL</code>.</p></dd>


<dt id="arg-piece-notation-pattern-type-prepositions">piece, notation, pattern_type, prepositions<a class="anchor" aria-label="anchor" href="#arg-piece-notation-pattern-type-prepositions"></a></dt>
<dd><p>Arguments passed to
both <code><a href="primary_aggregates.html">primary_aggregates()</a></code> and <code><a href="finaldemand_aggregates.html">finaldemand_aggregates()</a></code>
and, ultimately, to
<code><a href="https://matthewheun.github.io/matsbyname/reference/select_rowcol_piece_byname.html" class="external-link">matsbyname::select_rowcol_piece_byname()</a></code>
for the purpose of selecting rows and columns
for primary and final demand aggregations.
See
<code><a href="https://matthewheun.github.io/matsbyname/reference/select_rowcol_piece_byname.html" class="external-link">matsbyname::select_rowcol_piece_byname()</a></code>
for details.</p></dd>


<dt id="arg-unnest">unnest<a class="anchor" aria-label="anchor" href="#arg-unnest"></a></dt>
<dd><p>A boolean that tells whether to unnest the outgoing data.
When <code>TRUE</code>, creates a new column called <code>product_sector</code> and columns of primary and final demand aggregates.
Default is <code>FALSE</code>.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>One of "solve", "QR", or "SVD". Default is "solve". See details.</p></dd>


<dt id="arg-tol-invert">tol_invert<a class="anchor" aria-label="anchor" href="#arg-tol-invert"></a></dt>
<dd><p>The tolerance for detecting linear dependencies in the columns inverted matrices.
Default is <code>.Machine$double.eps</code>.</p></dd>


<dt id="arg-tol-chop-sum">tol_chop_sum<a class="anchor" aria-label="anchor" href="#arg-tol-chop-sum"></a></dt>
<dd><p>The allowable deviation from <code>0</code> for the difference between
the sum of the chopped ECCs and the original ECC.
Default is <code>1e-4</code>.</p></dd>


<dt id="arg-r-u-u-feed-v-y-s-units">R, U, U_feed, V, Y, S_units<a class="anchor" aria-label="anchor" href="#arg-r-u-u-feed-v-y-s-units"></a></dt>
<dd><p>Matrices that describe the energy conversion chain (ECC).
See <code><a href="psut_cols.html">Recca::psut_cols</a></code> for default values.</p></dd>


<dt id="arg-chop-df-aggregate-primary-net-aggregate-demand-gross-aggregate-demand">chop_df, aggregate_primary, net_aggregate_demand, gross_aggregate_demand<a class="anchor" aria-label="anchor" href="#arg-chop-df-aggregate-primary-net-aggregate-demand-gross-aggregate-demand"></a></dt>
<dd><p>Names of output columns.
See <code><a href="aggregate_cols.html">Recca::aggregate_cols</a></code>.</p></dd>


<dt id="arg-product-sector">product_sector<a class="anchor" aria-label="anchor" href="#arg-product-sector"></a></dt>
<dd><p>The name of the output column that contains the product, industry, or sector
for which footprint aggregates are given.
Default is <code>Recca::aggregate_cols$product_sector</code>.</p></dd>


<dt id="arg--prime">.prime<a class="anchor" aria-label="anchor" href="#arg--prime"></a></dt>
<dd><p>A string that denotes new matrices.
This string is used as a suffix that is appended to
many variable names.
Default is "_prime".</p></dd>


<dt id="arg-r-colname-u-colname-u-feed-colname-u-eiou-colname-r-eiou-colname-v-colname-y-colname-s-units-colname">R_colname, U_colname, U_feed_colname, U_eiou_colname, r_eiou_colname, V_colname, Y_colname, S_units_colname<a class="anchor" aria-label="anchor" href="#arg-r-colname-u-colname-u-feed-colname-u-eiou-colname-r-eiou-colname-v-colname-y-colname-s-units-colname"></a></dt>
<dd><p>Names of input matrices in <code>.sut_data</code>. See <code><a href="psut_cols.html">Recca::psut_cols</a></code> for default values.</p></dd>


<dt id="arg-r-prime-colname-u-prime-colname-u-feed-prime-colname-u-eiou-prime-colname-r-eiou-prime-colname-v-prime-colname-y-prime-colname-s-units-prime-colname">R_prime_colname, U_prime_colname, U_feed_prime_colname, U_eiou_prime_colname, r_eiou_prime_colname, V_prime_colname, Y_prime_colname, S_units_prime_colname<a class="anchor" aria-label="anchor" href="#arg-r-prime-colname-u-prime-colname-u-feed-prime-colname-u-eiou-prime-colname-r-eiou-prime-colname-v-prime-colname-y-prime-colname-s-units-prime-colname"></a></dt>
<dd><p>Names of output matrices in the return value.
Default values are constructed from
<code><a href="psut_cols.html">Recca::psut_cols</a></code> values suffixed with
the value of the <code>.prime</code> argument.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Chopped <strong>R</strong> and <strong>Y</strong> energy conversion chains
with optional primary and final demand aggregates.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Chopping <strong>R</strong> involves calculating an ECC for each industry row
and each product column in the <strong>R</strong> matrix.
This calculation is accomplished for each description of an energy conversion chain (ECC)
by the following algorithm:</p><ol><li><p>Calculate IO matrices with <code><a href="calc_io_mats.html">calc_io_mats()</a></code>.
(Do this step prior to calling this function.)</p></li>
<li><p>Identify each industry and each product from rows and columns of the <strong>R</strong> matrix.</p></li>
<li><p>For each industry and product independently,
perform a downstream swim with <code><a href="new_R_ps.html">new_R_ps()</a></code>
to obtain the ECC induced by that industry or product only.</p></li>
<li><p>Optionally (but included by default with <code>calc_pfd_aggs = TRUE</code>),
calculate primary and final demand aggregates using <code><a href="primary_aggregates.html">primary_aggregates()</a></code> and
<code><a href="finaldemand_aggregates.html">finaldemand_aggregates()</a></code>.
Both functions are called with <code>by = "Total"</code>,
yielding total primary and final demand aggregates.</p></li>
<li><p>Add the chopped ECCs to the right side
of <code>.sut_data</code> as a nested data frame.
If calculated, add the primary and final demand aggregates
as columns in the nested data frame.</p></li>
</ol><p>Chopping <strong>Y</strong> involves calculating an ECC for each individual
product row and sector column of final demand in the <strong>Y</strong> matrix.
This calculation is accomplished for each description of an ECC
by the following algorithm:</p><ol><li><p>Calculate io matrices with <code><a href="calc_io_mats.html">calc_io_mats()</a></code>.
(Do this step prior to calling this function.)</p></li>
<li><p>Identify each product and sector from rows and columns of the <strong>Y</strong> matrix.</p></li>
<li><p>For each product and sector independently,
perform an upstream swim with <code><a href="new_Y.html">new_Y()</a></code>
to obtain the ECC requirements to supply that product or sector only.</p></li>
<li><p>Optionally (but included by default),
calculate primary and final demand aggregates using <code><a href="primary_aggregates.html">primary_aggregates()</a></code> and
<code><a href="finaldemand_aggregates.html">finaldemand_aggregates()</a></code>.
Both functions are called with <code>by = "Total"</code>,
yielding total primary and final demand aggregates.</p></li>
<li><p>Add the chopped ECCs to the right side
of <code>.sut_data</code> as a nested data frame.
If calculated, add the primary and final demand aggregates
as columns in the nested data frame.</p></li>
</ol><p>Use the <code>unnest</code> argument to define how the aggregate data are added to the right side of <code>.sut_data</code>
when <code>.sut_data</code> is a <code>matsindf</code> data frame.</p>
<p>Note that the nested data frame includes columns for the ECC matrices
for each isolated product or sector.
Optionally, the nested data frame includes primary and final demand aggregates
for the chopped ECCs.
The names of the columns in the data frame are taken from the <code>*_prime_colname</code> arguments.</p>
<p><code>chop_R()</code> and <code>chop_Y()</code> involve downstream and upstream swims
performed by the <code><a href="new_R_ps.html">new_R_ps()</a></code> and <code><a href="new_Y.html">new_Y()</a></code> functions.
Both involve matrix inverses.
The <code>method</code> arguments specify how the matrix inversion is accomplished.
The <code>tol</code> argument specifies the tolerance for detecting linearities in the matrix
to be inverted.
See the documentation at <code><a href="https://matthewheun.github.io/matsbyname/reference/invert_byname.html" class="external-link">matsbyname::invert_byname()</a></code> for details.</p>
<p>Both <code>tol</code> and <code>method</code> should be a single values and apply to all rows of <code>.sut_data</code>.</p>
<p>Before chopping and swimming are performed,
the original <strong>R</strong> or <strong>Y</strong> matrix is used for an downstream or upstream swim (respectively).
An error will be emitted
if we are unable to reproduce the other ECC matrices
(<strong>U</strong>, <strong>U_feed</strong>, <strong>U_EIOU</strong>, <strong>V</strong>, and <strong>Y</strong> in the case of a downstream swim when chopping <strong>R</strong>;
<strong>R</strong>, <strong>U</strong>, <strong>U_feed</strong>, <strong>U_EIOU</strong>, and <strong>V</strong> in the case of an upstream swim when chopping <strong>Y</strong>)
to within machine precision.</p>
<p>When the <strong>R</strong> and <strong>Y</strong> matrices are chopped by rows or columns, the sum of the ECCs
created from the chopped rows or columns should equal the original ECC.
Internally, these functions check for sum consistency and emits an error if
inconsistencies are found.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">p_industries</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Resources - Crude"</span>, <span class="st">"Resources - NG"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fd_sectors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Residential"</span>, <span class="st">"Transport"</span>, <span class="st">"Oil fields"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">psut_mats</span> <span class="op">&lt;-</span> <span class="va">UKEnergy2000mats</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">matrix.name</span>, values_from <span class="op">=</span> <span class="va">matrix</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">psut_mats</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">chop_Y</span><span class="op">(</span>p_industries <span class="op">=</span> <span class="va">p_industries</span>, fd_sectors <span class="op">=</span> <span class="va">fd_sectors</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country  Year EnergyType LastStage R             U        U_EIOU   U_feed  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Final     <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Services  <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Useful    <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> GBR      <span style="text-decoration: underline;">2</span>000 X          Services  <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 5 more variables: V &lt;list&gt;, Y &lt;list&gt;, r_EIOU &lt;list&gt;, S_units &lt;list&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ChoppedECCs &lt;list&gt;</span></span>
<span class="r-in"><span><span class="va">psut_mats</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">chop_Y</span><span class="op">(</span>p_industries <span class="op">=</span> <span class="va">p_industries</span>, fd_sectors <span class="op">=</span> <span class="va">fd_sectors</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 24 × 24</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Country  Year EnergyType LastStage R             U        U_EIOU   U_feed  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Final     <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Final     <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Final     <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Final     <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Final     <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Final     <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Services  <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Services  <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Services  <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Services  <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 14 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 16 more variables: V &lt;list&gt;, Y &lt;list&gt;, r_EIOU &lt;list&gt;, S_units &lt;list&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ProductIndustrySector &lt;chr&gt;, R_prime &lt;named list&gt;, U_prime &lt;named list&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   U_feed_prime &lt;named list&gt;, U_EIOU_prime &lt;named list&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   r_EIOU_prime &lt;named list&gt;, V_prime &lt;named list&gt;, Y_prime &lt;named list&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   S_units_prime &lt;named list&gt;, EXp &lt;dbl&gt;, EXfdgross &lt;dbl&gt;, EXfdnet &lt;dbl&gt;</span></span>
<span class="r-in"><span><span class="va">psut_mats_2</span> <span class="op">&lt;-</span> <span class="va">psut_mats</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Slice to avoid the services rows on which NA values are obtained due to unit homogeneity.</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">LastStage</span> <span class="op">!=</span> <span class="st">"Services"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Calculate aggregates</span></span></span>
<span class="r-in"><span><span class="va">psut_mats_2</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">chop_R</span><span class="op">(</span>p_industries <span class="op">=</span> <span class="va">p_industries</span>, fd_sectors <span class="op">=</span> <span class="va">fd_sectors</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country  Year EnergyType LastStage R             U        U_EIOU   U_feed  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Final     <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Useful    <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 5 more variables: V &lt;list&gt;, Y &lt;list&gt;, r_EIOU &lt;list&gt;, S_units &lt;list&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ChoppedECCs &lt;list&gt;</span></span>
<span class="r-in"><span><span class="va">psut_mats_2</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">chop_R</span><span class="op">(</span>p_industries <span class="op">=</span> <span class="va">p_industries</span>, fd_sectors <span class="op">=</span> <span class="va">fd_sectors</span>, unnest <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 8 × 24</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Country  Year EnergyType LastStage R             U        U_EIOU   U_feed  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Final     <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Final     <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Final     <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Final     <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Useful    <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Useful    <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Useful    <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> GBR      <span style="text-decoration: underline;">2</span>000 E          Useful    <span style="color: #949494;">&lt;dbl [2 × 2]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span> <span style="color: #949494;">&lt;dbl[…]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 16 more variables: V &lt;list&gt;, Y &lt;list&gt;, r_EIOU &lt;list&gt;, S_units &lt;list&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ProductIndustrySector &lt;chr&gt;, R_prime &lt;named list&gt;, U_prime &lt;named list&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   U_feed_prime &lt;named list&gt;, U_EIOU_prime &lt;named list&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   r_EIOU_prime &lt;named list&gt;, V_prime &lt;named list&gt;, Y_prime &lt;named list&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   S_units_prime &lt;named list&gt;, EXp &lt;dbl&gt;, EXfdgross &lt;dbl&gt;, EXfdnet &lt;dbl&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Heun, Emmanuel Aramendia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

