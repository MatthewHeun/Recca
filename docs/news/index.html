<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • Recca</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Recca</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.42</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/Recca.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Aggregation.html">Aggregation</a>
    <a class="dropdown-item" href="../articles/new-function-interaction.html">new_* function interactions</a>
    <a class="dropdown-item" href="../articles/new-functions.html">new_* functions</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MatthewHeun/Recca/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/MatthewHeun/Recca/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.42" id="recca-0142-2023-06-02">Recca 0.1.42 (2023-06-02)<a class="anchor" aria-label="anchor" href="#recca-0142-2023-06-02"></a></h2>
<ul><li>Fixed a bug where writing <code>Matrix</code> objects failed in <code><a href="../reference/write_ecc_to_excel.html">write_ecc_to_excel()</a></code>. Thanks to Pierre Jacques for reporting this problem.</li>
<li>New function <code>calc_eta_fu()</code> calculates final-to-useful efficiencies for every entry in <strong>Y</strong> and <strong>U_EIOU</strong> matrices, responding to a feature request from Pierre Jacques.</li>
<li>New tests for new features.
<ul><li>Now up to at 641 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.41" id="recca-0141-2023-04-28-doi">Recca 0.1.41 (2023-04-28) <a href="https://doi.org/10.5281/zenodo.7877495" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.7877495.svg" alt="DOI"></a>
<a class="anchor" aria-label="anchor" href="#recca-0141-2023-04-28-doi"></a></h2>
<ul><li>Responded to policy changes in <code><a href="https://rdrr.io/pkg/matsindf/man/matsindf_apply.html" class="external-link">matsindf::matsindf_apply()</a></code> by setting default arguments to <code>NULL</code> for several internal functions.</li>
<li>
<code><a href="../reference/region_aggregates.html">region_aggregates()</a></code> gains <code>drop_na_few</code> argument that tells whether to eliminate rows with <code>NA</code> in <code>few_colname</code>.</li>
<li>Adjusted example ECC names. Example changes include:
<ul><li>“Resources - Crude” –&gt; “Resources [of Crude]”</li>
<li>“Crude - Fields” –&gt; “Crude [from Fields]”</li>
<li>“MD - Car engines” –&gt; “MD [from Car engines]” These changes align the example ECC with the naming conventions now in use throughout the package and in various pipelines.</li>
</ul></li>
<li>
<code><a href="../reference/chop-doc.html">chop_R()</a></code> now also chops by rows (industries), since we are now including all exogenous sources of energy in the <strong>R</strong> matrix.</li>
<li>New function <code><a href="../reference/get_all_products_and_industries.html">get_all_products_and_industries()</a></code> generates lists of unique product and industry names for an ECC and is aware of <code>RCLabels</code>-type <code>piece</code>s of row and column names.</li>
<li>Net EROI calculations removed, only gross values calculated.</li>
<li>Simplifications reduced number of tests.
<ul><li>Still at 632 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.40" id="recca-0140-2023-01-25-doi">Recca 0.1.40 (2023-01-25) <a href="https://doi.org/10.5281/zenodo.7571202" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.7571202.svg" alt="DOI"></a>
<a class="anchor" aria-label="anchor" href="#recca-0140-2023-01-25-doi"></a></h2>
<ul><li>This version contains only fixes to the continuous integration build system. There are no changes to any code.</li>
<li>Remove use of the <code>Remotes:</code> field in DESCRIPTION. Instead, now using <code>pkgdepends</code> syntax in the <code>extra-packages:</code> fields of <code>R_CMD-check.yaml</code> and <code>test-coverage.yaml</code>.</li>
<li>Update to latest version of the GitHub action for test coverage.</li>
<li>No new tests.
<ul><li>Still at 672 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.39" id="recca-0139-2023-01-24-doi">Recca 0.1.39 (2023-01-24) <a href="https://doi.org/10.5281/zenodo.7566435" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.7566435.svg" alt="DOI"></a>
<a class="anchor" aria-label="anchor" href="#recca-0139-2023-01-24-doi"></a></h2>
<ul><li>Tests once again all passing on all test rigs of GitHub Actions. Tests had been failing due to new code that correctly detects unit errors (inhomogeneity) for some upstream swim calculations with services as the last stage in an ECC.</li>
<li>Move tests associated with <code><a href="https://rdrr.io/pkg/matsindf/man/verify_cols_missing.html" class="external-link">verify_cols_missing()</a></code> from the <code>Recca</code> package to <code>matsindf</code>. Those tests didn’t belong in <code>Recca</code>, because <code><a href="https://rdrr.io/pkg/matsindf/man/verify_cols_missing.html" class="external-link">verify_cols_missing()</a></code> is no longer in <code>Recca</code>.</li>
<li>Eliminated data frame rows for a couple tests that were producing <code>NA</code> values due to unit inhomogeneity.</li>
<li>Switched to simpler formulas derived by MKH for <code><a href="../reference/new_R_ps.html">new_R_ps()</a></code>.</li>
<li>Eliminated <code>tidyselect</code> warnings.</li>
<li>
<code><a href="../reference/write_ecc_to_excel.html">write_ecc_to_excel()</a></code> now ensures that columns of <strong>U</strong> and rows of <strong>V</strong> are the same, even if it means adding zero columns to <strong>U</strong> or zero rows to <strong>V</strong>. This change makes further Excel calculations easier.</li>
<li>
<code>chopR()</code> now checks for the ability to swim downstream with <strong>R_prime</strong> = <strong>R</strong> to re-create the original energy conversion chain, thereby bringing consistency with <code>chopY()</code>. This approach identifies numerical precision errors before they cause a problem.</li>
<li>
<code>chopR()</code> now uses <code>calc_io_mats(direction = "downstream")</code>, thereby consistently using <code><a href="../reference/calc_io_mats.html">calc_io_mats()</a></code> for both upstream and downstream swims.</li>
<li>
<code><a href="../reference/calc_io_mats.html">calc_io_mats()</a></code> gains new argument <code>direction</code> that tells whether the input-output matrices are for “upstream” or “downstream” swims.</li>
<li>
<code><a href="../reference/finaldemand_aggregates.html">finaldemand_aggregates()</a></code> now produces true <code>0</code> instead of a 1x1 matrix without row or column labels when no columns names of <strong>U_EIOU</strong> or <strong>Y</strong> match <code>fd_sectors</code>.</li>
<li>Fixed two bugs in <code><a href="../reference/new_Y.html">new_Y()</a></code>. There were compensatory formula errors that only appeared in some edge cases.</li>
<li>Aggregations are now optional (on by default) in <code><a href="../reference/chop-doc.html">chop_R()</a></code> and <code><a href="../reference/chop-doc.html">chop_Y()</a></code>.</li>
<li>Renamed <code>effects_aggregates()</code> and <code>footprint_aggregates()</code> to <code><a href="../reference/chop-doc.html">chop_R()</a></code> and <code><a href="../reference/chop-doc.html">chop_Y()</a></code>.</li>
<li>New function <code>effects_aggregates()</code> swims downstream from the <strong>R</strong> matrix to final demand for each column (energy carrier) in the <strong>R</strong> matrix and calculates primary and final demand aggregates.</li>
<li>
<code>footprint_aggregates()</code> now checks that the chopped ECCs sum to the original ECC on every calculation.</li>
<li>
<code><a href="../reference/region_aggregates.html">region_aggregates()</a></code> now correctly eliminates the <code>few_colname</code> when the incoming data frame has no rows.</li>
<li>
<code>footprint_aggregates()</code> now also includes the <code>*_prime_colname</code> matrices in the nested data frame.</li>
<li>
<code><a href="../reference/calc_io_mats.html">calc_io_mats()</a></code> and <code><a href="../reference/calc_L.html">calc_L()</a></code> gain <code>method</code> and <code>tol</code> arguments to control matrix inversion.</li>
<li>
<code><a href="../reference/calc_eta_pfd.html">calc_eta_pfd()</a></code> now includes columns of names of efficiencies in its output. This feature will assist pivoting on efficiencies later.</li>
<li>New function <code>footprint_aggregates()</code> calculates primary and final demand aggregates for each isolated row and column in <strong>Y</strong>.</li>
<li>
<code><a href="../reference/new_Y.html">new_Y()</a></code> now also produced matrices <strong>U_feed</strong>, <strong>U_eiou</strong>, and <strong>r_eiou</strong> in its output.</li>
<li>
<strong>W</strong> matrix no longer included in the output of <code><a href="../reference/new_Y.html">new_Y()</a></code>. <strong>W</strong> can always be calculated from <strong>V</strong>^T - <strong>U</strong>.</li>
<li>New function <code><a href="../reference/write_ecc_to_excel.html">write_ecc_to_excel()</a></code> stores ECCs in spatial format in Excel. All ECC matrices are written to the Excel file: <strong>R</strong>, <strong>U</strong>, <strong>V</strong>, <strong>Y</strong>, <strong>U_feed</strong>, <strong>U_eiou</strong>, <strong>r_eiou</strong>, and <strong>S_units</strong>.</li>
<li>
<code><a href="../reference/primary_aggregates.html">primary_aggregates()</a></code> and <code><a href="../reference/finaldemand_aggregates.html">finaldemand_aggregates()</a></code> no longer require <code>p_industries</code> and <code>fd_sectors</code> to be present in the incoming list or data frame. Rather, <code>p_industries</code> and <code>fd_sectors</code> are treated as parameters that apply to all items in the incoming list or rows in the incoming data frame. This change brings consistency with other functions that use <code><a href="https://rdrr.io/pkg/matsindf/man/matsindf_apply.html" class="external-link">matsindf::matsindf_apply()</a></code> internally.</li>
<li>New function <code>group_aggregates()</code> that aggregates PSUT matrices according to an aggregation map.</li>
<li>New function <code><a href="../reference/despecified_aggregates.html">despecified_aggregates()</a></code> that aggregates PSUT matrices to a piece of row and column labels.</li>
<li>New argument <code>add_net_gross_cols</code> on <code><a href="../reference/primary_aggregates.html">primary_aggregates()</a></code> that tells whether to add both net and gross primary energy columns. (Net and gross primary energy aggregate columns will contain identical values, but the presence of both net and gross columns may make it easier to mesh with results from the <code><a href="../reference/finaldemand_aggregates.html">finaldemand_aggregates()</a></code> function, which produces net and gross columns that are different.)</li>
<li>
<code><a href="https://rdrr.io/pkg/IEATools/man/aggregate_regions.html" class="external-link">aggregate_regions()</a></code> now returns an empty data frame with the expected columns if the input data frame has no rows.</li>
<li>Many new tests for new features.
<ul><li>Now up to 672 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.38" id="recca-0138-2022-04-02-doi">Recca 0.1.38 (2022-04-02) <a href="https://zenodo.org/badge/latestdoi/116066838" class="external-link"><img src="https://zenodo.org/badge/116066838.svg" alt="DOI"></a>
<a class="anchor" aria-label="anchor" href="#recca-0138-2022-04-02-doi"></a></h2>
<ul><li>Removed unnecessary assertion that <code>matsbyname</code> is available in aggregation functions.</li>
<li>Eliminated <code>finaldemand_aggregates_with_units()</code>, because nobody was using it.</li>
<li>New function <code><a href="../reference/calc_eta_pfd.html">calc_eta_pfd()</a></code> calculates gross and net efficiencies from primary to final demand.</li>
<li>New function <code><a href="../reference/region_aggregates.html">region_aggregates()</a></code> calculates regional aggregates according to columns in a data frame.</li>
<li>New look for <code>pkgdown</code> website.</li>
<li>
<code><a href="../reference/extend_to_exergy.html">extend_to_exergy()</a></code> gains new arguments <code>mat_piece</code>, <code>phi_piece</code>, <code>notation</code>, and <code>prepositions</code> to enable more flexible row and column name matching between the various matrices and phi vectors. In addition, <code><a href="../reference/extend_to_exergy.html">extend_to_exergy()</a></code> now uses <code><a href="https://rdrr.io/pkg/matsbyname/man/vec_from_store_byname.html" class="external-link">matsbyname::vec_from_store_byname()</a></code> internally to correctly handle hatized vector multiplication.</li>
<li>Many new tests for new features.
<ul><li>Now up to 556 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.37" id="recca-0137-2021-10-13-doi">Recca 0.1.37 (2021-10-13) <a href="https://doi.org/10.5281/zenodo.5566713" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.5566713.svg" alt="DOI"></a>
<a class="anchor" aria-label="anchor" href="#recca-0137-2021-10-13-doi"></a></h2>
<ul><li>Added details to <code>Recca</code> vignette, including additional equations for embodied matrices.</li>
<li>New function <code><a href="../reference/extend_to_exergy.html">extend_to_exergy()</a></code> that calculates an exergy representation of an energy conversion chain given an energy representation of an energy conversion chain.</li>
<li>Many new tests for new features.
<ul><li>Now up to 530 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.36" id="recca-0136-2021-09-10-doi">Recca 0.1.36 (2021-09-10) <a href="https://doi.org/10.5281/zenodo.5500310" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.5500310.svg" alt="DOI"></a>
<a class="anchor" aria-label="anchor" href="#recca-0136-2021-09-10-doi"></a></h2>
<ul><li>Get started file updated. Some matrices definitions (<strong>G</strong>, <strong>H</strong>, <strong>E</strong>) needed to be updated.</li>
<li>Removed redundant IO matrices (<strong>C_feed</strong>, <strong>D_feed</strong>, and <strong>O_feed</strong>).</li>
<li>Tests
<ul><li>512 tests</li>
<li>Test coverage remains at 100 %</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.35" id="recca-0135-2021-08-20-doi">Recca 0.1.35 (2021-08-20) <a href="https://doi.org/10.5281/zenodo.5226086" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.5226086.svg" alt="DOI"></a>
<a class="anchor" aria-label="anchor" href="#recca-0135-2021-08-20-doi"></a></h2>
<ul><li>R matrix formulation now adopted for input output calculations, for upstream and downstream swims, as well as for embodied energy calculations.</li>
<li>Added new file <code>new_R_ps_example.xlsx</code> that demonstrates equations for swimming “downstream.”</li>
<li>Updated to stable and active status badges.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.34" id="recca-0134-2021-04-11">Recca 0.1.34 (2021-04-11)<a class="anchor" aria-label="anchor" href="#recca-0134-2021-04-11"></a></h2>
<ul><li>Fix lingering problems in R-CMD-check after the move to GitHub Actions for continuous integration testing.</li>
<li>No new tests.
<ul><li>Still at 435 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.33" id="recca-0133-2021-04-11">Recca 0.1.33 (2021-04-11)<a class="anchor" aria-label="anchor" href="#recca-0133-2021-04-11"></a></h2>
<ul><li>Move from Travis to GitHub Actions for continuous integration testing.</li>
<li>No new tests.
<ul><li>Still at 435 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.32" id="recca-0132-2021-03-16">Recca 0.1.32 (2021-03-16)<a class="anchor" aria-label="anchor" href="#recca-0132-2021-03-16"></a></h2>
<ul><li>Modified aggregation functions to use simpler (but verbose) <code>if</code> statements to choose aggregation functions. This change works around an error when calling the aggregation functions from other packages.</li>
<li>New tests for new code paths.
<ul><li>Now at 435 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.31" id="recca-0131-2021-02-25">Recca 0.1.31 (2021-02-25)<a class="anchor" aria-label="anchor" href="#recca-0131-2021-02-25"></a></h2>
<ul><li>New argument to aggregation functions: <code>pattern_type</code> which tells how to match primary and final demand sector names for aggregation.</li>
<li>New tests for new feature.
<ul><li>Now 421 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.30" id="recca-0130-2021-02-22">Recca 0.1.30 (2021-02-22)<a class="anchor" aria-label="anchor" href="#recca-0130-2021-02-22"></a></h2>
<ul><li>Fixed bugs in <code><a href="../reference/finaldemand_aggregates.html">finaldemand_aggregates()</a></code> and <code>finaldemand_aggregates_with_units()</code> where argument <code>fd_sectors</code> was not respected for gross energy aggregation.</li>
<li>New and revamped tests to guard against regression.
<ul><li>Now 417 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.29" id="recca-0129-2021-02-01">Recca 0.1.29 (2021-02-01)<a class="anchor" aria-label="anchor" href="#recca-0129-2021-02-01"></a></h2>
<ul><li>A <code>method_q_calculation</code> argument has been added to the <code><a href="../reference/calc_io_mats.html">calc_io_mats()</a></code> function. This enables to calculate the q vector using either a consumption-side or supply-side perspective.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.28" id="recca-0128-2020-12-23">Recca 0.1.28 (2020-12-23)<a class="anchor" aria-label="anchor" href="#recca-0128-2020-12-23"></a></h2>
<ul><li>New function <code><a href="../reference/find_p_industry_names.html">find_p_industry_names()</a></code> looks at <strong>R</strong>, <strong>V</strong>, and <strong>Y</strong> matrices to find names of primary industries (industries that produce primary energy). The function looks for prefixes among row (<code>R</code> and <code>V</code>) and column (<code>Y</code>) names to identify primary industries.</li>
<li>New tests for new function.
<ul><li>Now 416 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.27" id="recca-0127-2020-12-08">Recca 0.1.27 (2020-12-08)<a class="anchor" aria-label="anchor" href="#recca-0127-2020-12-08"></a></h2>
<ul><li>Move IEA aggregation functions out of this package and into the <code>IEATools</code> package.</li>
<li>Now using package constants for names of aggregate columns. Column names match similar names in <code>IEATools</code>.</li>
<li>Now using better function-matching and -selecting code in <code><a href="../reference/finaldemand_aggregates.html">finaldemand_aggregates()</a></code>
</li>
<li>Fewer tests due to moving some functions out of the package.
<ul><li>Now 411 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.26" id="recca-0126-2020-12-06">Recca 0.1.26 (2020-12-06)<a class="anchor" aria-label="anchor" href="#recca-0126-2020-12-06"></a></h2>
<ul><li>
<code><a href="../reference/primary_aggregates.html">primary_aggregates()</a></code>, <code>finaldemand_aggregates(), and</code>finaldemand_aggregates_with_units()<code>now require a column of</code>p_industries<code>or</code>fd_sectors<code>instead of a vector    when a</code>.sutdata<code>is a data frame.   This change works around a problem with a common use case where    the caller would create the</code>fd_sectors<code>column from the column names of</code>Y` vectors in the data frame.</li>
<li>Working to modernize the Recca code.
<ul><li>Use R markdown in documentation (<code>`term`</code> instead of <code>\code{term}</code>).</li>
<li>Use package constants for column name arguments (<code>Recca::sankey_cols$sankey</code> instead of “Sankey”).</li>
</ul></li>
<li>New tests for the new feature.
<ul><li>Now up to 413 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.25" id="recca-0125-2020-09-17">Recca 0.1.25 (2020-09-17)<a class="anchor" aria-label="anchor" href="#recca-0125-2020-09-17"></a></h2>
<ul><li>New author Emmanuel Aramendia. Welcome!</li>
<li>Test coverage now up to 100%.</li>
<li>Created a new function <code><a href="../reference/calc_embodied_EIOU.html">calc_embodied_EIOU()</a></code> that calculates different embodied EIOU matrices for a given final demand</li>
<li>Created a new function <code><a href="../reference/calc_erois.html">calc_erois()</a></code> that calculates different vector of product-level and industry-level EROIs using different assumptions.</li>
<li>Created a new function <code><a href="../reference/calc_E_EIOU.html">calc_E_EIOU()</a></code> that calculates the <code>E_EIOU</code> matrix of EIOU energy use by unit of industry output, split by product. It also calculates the direct energy extension vector e_EIOU of total EIOU energy use by unit of industry output.</li>
<li>Fixed a bug in one of the vignettes related to the move from <code>U_excl_EIOU</code> to <code>U_feed</code>.</li>
<li>
<code>prep_UK2000.R</code> and <code>prep_perfectsub.R</code> scripts fixed to work with <code>IEATools</code>, which now uses <code>U_feed</code> instead of <code>U_excl_EIOU</code>.</li>
<li>Added tests for new features and old bugs.
<ul><li>Now up to 407 tests, all of which pass.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.24" id="recca-0124-2020-03-17">Recca 0.1.24 (2020-03-17)<a class="anchor" aria-label="anchor" href="#recca-0124-2020-03-17"></a></h2>
<ul><li>New tests for new features and old bugs.
<ul><li>Now up to 337 tests, all passing.</li>
<li>Test coverage remains at 100 %.</li>
</ul></li>
<li>Now using <code>U_feed</code> everywhere.</li>
<li>Calculate <code>Z_feed</code> and <code>A_feed</code> in <code><a href="../reference/calc_io_mats.html">calc_io_mats()</a></code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.23" id="recca-0123-2020-03-17">Recca 0.1.23 (2020-03-17)<a class="anchor" aria-label="anchor" href="#recca-0123-2020-03-17"></a></h2>
<ul><li>Added a <code>...</code> argument to <code><a href="../reference/make_sankey.html">make_sankey()</a></code>, which passes arguments to <code><a href="https://rdrr.io/pkg/networkD3/man/sankeyNetwork.html" class="external-link">networkD3::sankeyNetwork()</a></code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.22" id="recca-0122-2020-05-02">Recca 0.1.22 (2020-05-02)<a class="anchor" aria-label="anchor" href="#recca-0122-2020-05-02"></a></h2>
<ul><li>Fixed a bug in <code><a href="../reference/primary_aggregates.html">primary_aggregates()</a></code>. <code><a href="../reference/primary_aggregates.html">primary_aggregates()</a></code> had been assuming that either the <strong>R</strong> or the <strong>V</strong> matrix (but not both) could contain industries counted in total primary energy supply (production, imports, exports, etc.). However, that is not true. <strong>R</strong> is for resource industries, so imports, exports, marine and aviation bunkers, and stock changes are excluded from <strong>R</strong>. However, imports, exports, marine and aviation bunkers, and stock changes <em>are</em> included in total primary energy supply. I removed the conditional <code>xor</code> check for appearance of TPES industries in <strong>R</strong> and <strong>V</strong>. Everything seems to be working now.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.21" id="recca-0121-2020-03-27">Recca 0.1.21 (2020-03-27)<a class="anchor" aria-label="anchor" href="#recca-0121-2020-03-27"></a></h2>
<ul><li>Now up to 332 tests, all of which pass.</li>
<li>Test coverage now up to 100%.</li>
<li>Implemented energy balance checking for <code><a href="../reference/new_R_ps.html">new_R_ps()</a></code> with its own tolerance, by default <code>1e-6</code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.20" id="recca-0120-2020-03-27">Recca 0.1.20 (2020-03-27)<a class="anchor" aria-label="anchor" href="#recca-0120-2020-03-27"></a></h2>
<ul><li>Completed the conversion of the entire package to enable use of <code>R</code> matrices in the PSUT framework. This effort involved converting several functions to accept <em>either</em>
<ol style="list-style-type: decimal"><li>both <strong>R</strong> and <strong>V</strong> matrices in the <code>R</code> and <code>V</code> arguments or</li>
<li>nothing supplied to the <code>R</code> argument and <code>R + V</code> supplied to the <code>V</code> argument.</li>
</ol></li>
<li>Worked around a bug in <code><a href="https://rdrr.io/pkg/openxlsx/man/read.xlsx.html" class="external-link">openxlsx::read.xlsx()</a></code> that HTML-escapes referenced cells that contain “&amp;”, “&lt;”, or “&gt;”.<br>
See <a href="https://github.com/awalker89/openxlsx/issues/393" class="external-link uri">https://github.com/awalker89/openxlsx/issues/393</a> for details.</li>
<li>Switched to using the <code>openxlsx</code> package for reading data directly out of Excel files, eliminating the need to export .csv files for the UKEnergy2000tidy data frame.</li>
<li>
<code><a href="../reference/primary_aggregates.html">primary_aggregates()</a></code> now properly handles PSUT matrices formulated with <code>R</code> matrices.</li>
<li>Fixed typos in <code>Recca.Rmd</code> vignette.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.19" id="recca-0119-2020-02-19">Recca 0.1.19 (2020-02-19)<a class="anchor" aria-label="anchor" href="#recca-0119-2020-02-19"></a></h2>
<ul><li>Removed dependency on package <code>qgraph</code>. <code>qgraph</code> depended upon <code>graph</code>, which is apparently no longer available on CRAN. The dependency on <code>qgraph</code> was only for graphical representations of ECCs. But, graphical representations of ECCs are not presently implemented in <code>Recca</code>. Future versions of <code>Recca</code> may implement graphical representations. I can reassess the packages for graphing and Sankey diagrams at a later date.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.18" id="recca-0118-2020-01-17">Recca 0.1.18 (2020-01-17)<a class="anchor" aria-label="anchor" href="#recca-0118-2020-01-17"></a></h2>
<ul><li>Updates to synchronize with recent changes in other packages. In particular, there was one place where <code>group</code>ing on a column of a data frame with <code>NA</code> entries was causing a warning to be emitted. Now, the <code>grouping</code> happens after splitting the data frame into rows with <code>NA</code> entries and those without. Grouping and sorting happens only for the rows without <code>NA</code> values.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.17" id="recca-0117-2019-02-25">Recca 0.1.17 (2019-02-25)<a class="anchor" aria-label="anchor" href="#recca-0117-2019-02-25"></a></h2>
<ul><li>First draft of completed vignette.</li>
<li>Removed ecc_layout(). It was not being used, and there is a <code>create_sankey()</code> function, anyway.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.16" id="recca-0116-2019-02-16">Recca 0.1.16 (2019-02-16)<a class="anchor" aria-label="anchor" href="#recca-0116-2019-02-16"></a></h2>
<ul><li>Now automatically building in Travis.</li>
<li>Added new <code><a href="../reference/reverse.html">reverse()</a></code> function to change flow direction of an ECC. <code><a href="../reference/reverse.html">reverse()</a></code> will be useful for downstream swim functions.</li>
<li>Simplified and improved <code><a href="../reference/resource_industries.html">resource_industries()</a></code> function.
<ul><li>No longer summing columns of <strong>U</strong> matrix.</li>
<li>Instead, cleaning 0 columns of <strong>U</strong> and comparing names of columns to the original <strong>U</strong>.</li>
</ul></li>
<li>Eliminated all <code>@importFrom</code> statements by fully-qualifying all function calls.</li>
<li>Test coverage now up to 100%.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.15" id="recca-0115-2019-01-09">Recca 0.1.15 (2019-01-09)<a class="anchor" aria-label="anchor" href="#recca-0115-2019-01-09"></a></h2>
<ul><li>First draft of <code>new-functions</code> vignette now complete, including demonstrations of <code><a href="../reference/new_R_ps.html">new_R_ps()</a></code> and <code><a href="../reference/new_k_ps.html">new_k_ps()</a></code> functions.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.14" id="recca-0114-2019-01-07">Recca 0.1.14 (2019-01-07)<a class="anchor" aria-label="anchor" href="#recca-0114-2019-01-07"></a></h2>
<ul><li>New function <code><a href="../reference/make_sankey.html">make_sankey()</a></code> does what it says: makes a Sankey diagram. <code><a href="../reference/make_sankey.html">make_sankey()</a></code> is the first function that optionally uses the resource (<code>R</code>) matrix.</li>
<li>
<code><a href="../reference/edge_list.html">edge_list()</a></code> also now accepts a resource (<code>R</code>) matrix on input.</li>
<li>The vignette describing the <code>new*()</code> functions now has a section on <code><a href="../reference/new_R_ps.html">new_R_ps()</a></code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.13" id="recca-0113-2018-12-21">Recca 0.1.13 (2018-12-21)<a class="anchor" aria-label="anchor" href="#recca-0113-2018-12-21"></a></h2>
<ul><li>
<code><a href="../reference/calc_F_footprint_effects.html">calc_F_footprint_effects()</a></code> now cleans rows and columns (deletes rows and columns containing all 0s) before calculating row and column fractions.</li>
<li>
<code><a href="../reference/calc_F_footprint_effects.html">calc_F_footprint_effects()</a></code> now calculates row and column fractions using <code><a href="https://rdrr.io/pkg/matsbyname/man/fractionize_byname.html" class="external-link">matsbyname::fractionize_byname()</a></code>, providing a speed boost.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.12" id="recca-0112-2018-12-02">Recca 0.1.12 (2018-12-02)<a class="anchor" aria-label="anchor" href="#recca-0112-2018-12-02"></a></h2>
<ul><li>Added a vignette discussing interactions among <code>new_*</code> functions.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.11" id="recca-0111-2018-12-02">Recca 0.1.11 (2018-12-02)<a class="anchor" aria-label="anchor" href="#recca-0111-2018-12-02"></a></h2>
<ul><li>Updates to embodied energy calculations to conform to updated <code><a href="https://rdrr.io/pkg/matsbyname/man/hatinv_byname.html" class="external-link">matsbyname::hatinv_byname()</a></code> which handles <code>0</code> values better.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.10" id="recca-0110-2018-11-29">Recca 0.1.10 (2018-11-29)<a class="anchor" aria-label="anchor" href="#recca-0110-2018-11-29"></a></h2>
<ul><li>Now importing <code>magrittr</code> pipe at high level.</li>
<li>Now using <code><a href="https://rdrr.io/pkg/matsbyname/man/hatinv_byname.html" class="external-link">matsbyname::hatinv_byname()</a></code> function instead of <code>matsbyname::hatize_byname() %&gt;% matsbyname::invert_byname()</code>.</li>
<li>Breaking change: arguments to <code>Recca</code> functions are no longer named <code>*_colname</code>. I’m standardizing argument names. The new approach yields better code when calling functions with individual matrices: every matrix needs to be named. And when using functions to operate on a data frame the default values for column names mean that data frames can be piped to functions that are called with no parameters. Furthermore, this change allows lists output from previous functions to be used in later function calls without name changes. For example, <code>f1</code> produces a list <code>l</code> with named item <code>z</code>, and <code>z</code> is an input to <code>f2</code>. The previous naming convention would require user mapping <code>z</code> to <code>z_colname</code>: <code>f2(z_colname = l$z)</code>. The new naming convention allows <code>f2(l)</code>, because <code>l</code> contains named item <code>z</code>, and <code>f2</code> has an argument new named <code>z</code> (where it had been named <code>z_colname</code> before). In all ways, the new argument naming convention is more elegant than the previous <code>*_colname</code> approach.</li>
<li>Building a vignette that describes the package.</li>
<li>New test for a simple, 1-industry ECC.</li>
<li>Now up to 316 tests.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.9" id="recca-019-2018-11-08">Recca 0.1.9 (2018-11-08)<a class="anchor" aria-label="anchor" href="#recca-019-2018-11-08"></a></h2>
<ul><li>Breaking change: <code>reconstruct_UV()</code> –&gt; <code><a href="../reference/new_Y.html">new_Y()</a></code>. This change allows for several <code>new_*()</code> functions that assess changes to the ECC when some part of the ECC changes.</li>
<li>New function <code><a href="../reference/new_k_ps.html">new_k_ps()</a></code> assesses changes to the ECC when proportion of inputs to an industry change under the assumption of perfect substitution.</li>
<li>New functions <code><a href="../reference/products_unit_homogeneous.html">products_unit_homogeneous()</a></code>, <code><a href="../reference/inputs_unit_homogeneous.html">inputs_unit_homogeneous()</a></code>, and <code><a href="../reference/outputs_unit_homogeneous.html">outputs_unit_homogeneous()</a></code> test whether products, inputs to all industries, and outputs from all industries are unit-homogeneous.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.8" id="recca-018-2018-07-27">Recca 0.1.8 (2018-07-27)<a class="anchor" aria-label="anchor" href="#recca-018-2018-07-27"></a></h2>
<ul><li>Added new function <code>node_list</code> which creates a node list from an edge list.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.7" id="recca-017-2018-07-26">Recca 0.1.7 (2018-07-26)<a class="anchor" aria-label="anchor" href="#recca-017-2018-07-26"></a></h2>
<ul><li>Added new function <code>edge_list</code> which creates an edge list from U, V, and Y matrices.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.6" id="recca-016-2018-07-09">Recca 0.1.6 (2018-07-09)<a class="anchor" aria-label="anchor" href="#recca-016-2018-07-09"></a></h2>
<ul><li>Fixed a bug in <code>verify_IEATable_energy_balance</code>. <code>err</code> –&gt; <code>as.name(err)</code>.</li>
<li>Fixed a bug in <code>S_units_from_tidy</code>. Needed to change an argument name for <code><a href="https://rdrr.io/pkg/matsindf/man/collapse_to_matrices.html" class="external-link">matsindf::collapse_to_matrices</a></code> from <code>values</code> –&gt; <code>matvals</code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.5" id="recca-015-2018-07-02">Recca 0.1.5 (2018-07-02)<a class="anchor" aria-label="anchor" href="#recca-015-2018-07-02"></a></h2>
<ul><li>Added a column in the output of <code>verify_SUT_industry_production</code> that indicates which industries are problematic.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.4" id="recca-014-2018-06-28">Recca 0.1.4 (2018-06-28)<a class="anchor" aria-label="anchor" href="#recca-014-2018-06-28"></a></h2>
<ul><li>Fixed a bug in the <code>verify_IEATable_energy_balance</code> function: !!err –&gt; !!as.name(err)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.3" id="recca-013-2018-06-27">Recca 0.1.3 (2018-06-27)<a class="anchor" aria-label="anchor" href="#recca-013-2018-06-27"></a></h2>
<ul><li>Added <code>verify_IEATable_energy_balance</code> function</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.2" id="recca-012-2018-05-20">Recca 0.1.2 (2018-05-20)<a class="anchor" aria-label="anchor" href="#recca-012-2018-05-20"></a></h2>
<ul><li>All functions now use <code><a href="https://rdrr.io/pkg/matsindf/man/matsindf_apply.html" class="external-link">matsindf::matsindf_apply()</a></code>.</li>
<li>
<code>F</code> functions now do internal energy balance checks.</li>
<li>Much code and API cleanup.</li>
<li>Note that some API changes are expected, particularly name changes for <code>*_colname</code> arguments.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="recca-011-2018-04-16">Recca 0.1.1 (2018-04-16)<a class="anchor" aria-label="anchor" href="#recca-011-2018-04-16"></a></h2>
<ul><li>New function <code>calc_io_mats</code>: calculate input-output (PSUT version) matrices, including <strong>y</strong>, <strong>q</strong>, <strong>g</strong>, <strong>W</strong>, <strong>Z</strong>, <strong>D</strong>, <strong>C</strong>, <strong>A</strong>, <strong>L_ixp</strong>, and <strong>L_pxp</strong>.</li>
<li>New function <code>reconstruct_UV()</code>: Reconstruct the energy conversion chain (new <code>U</code> and <code>V</code> matrices) from a new final demand matrix (<code>Y</code>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="recca-010-2018-04-12">Recca 0.1.0 (2018-04-12)<a class="anchor" aria-label="anchor" href="#recca-010-2018-04-12"></a></h2>
<ul><li>Initial version</li>
<li>Includes:
<ul><li>
<code>UKEnergy2000tidy</code>, <code>UKEnergy2000mats</code>
</li>
<li>Functions to check energy balance</li>
<li>Functions to perform aggregation calculations for primary energy and final demand</li>
<li>Stub LaTeX vignette</li>
</ul></li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Matthew Heun, Emmanuel Aramendia.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

