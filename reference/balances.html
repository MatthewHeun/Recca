<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate inter- and intra-industry balances for PSUT (RUVY) matrices2 — balances • Recca</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate inter- and intra-industry balances for PSUT (RUVY) matrices2 — balances"><meta name="description" content="Balances are an important aspect of analyzing mass and energy conversion chains
in the PSUT framework with the RUVY matrices.
Often, balances are calculated on energy or exergy flows.
Balances can be calculated for mass flows or monetary flows, too."><meta property="og:description" content="Balances are an important aspect of analyzing mass and energy conversion chains
in the PSUT framework with the RUVY matrices.
Often, balances are calculated on energy or exergy flows.
Balances can be calculated for mass flows or monetary flows, too."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Recca</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.65</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/Recca.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Aggregation.html">Aggregation</a></li>
    <li><a class="dropdown-item" href="../articles/balances.html">Balances</a></li>
    <li><a class="dropdown-item" href="../articles/new-function-interaction.html">new_* function interactions</a></li>
    <li><a class="dropdown-item" href="../articles/new-functions.html">new_* functions</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MatthewHeun/Recca/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate inter- and intra-industry balances for PSUT (<strong>RUVY</strong>) matrices2</h1>
      <small class="dont-index">Source: <a href="https://github.com/MatthewHeun/Recca/blob/master/R/energy_balance.R" class="external-link"><code>R/energy_balance.R</code></a></small>
      <div class="d-none name"><code>balances.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Balances are an important aspect of analyzing mass and energy conversion chains
in the PSUT framework with the <strong>RUVY</strong> matrices.
Often, balances are calculated on energy or exergy flows.
Balances can be calculated for mass flows or monetary flows, too.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc_inter_industry_balance</span><span class="op">(</span></span>
<span>  .sutmats <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  R <span class="op">=</span> <span class="st">"R"</span>,</span>
<span>  U <span class="op">=</span> <span class="st">"U"</span>,</span>
<span>  V <span class="op">=</span> <span class="st">"V"</span>,</span>
<span>  Y <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>  balance_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="balance_cols.html">balance_cols</a></span><span class="op">$</span><span class="va">inter_industry_balance_colname</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">calc_intra_industry_balance</span><span class="op">(</span></span>
<span>  .sutmats <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  U <span class="op">=</span> <span class="st">"U"</span>,</span>
<span>  V <span class="op">=</span> <span class="st">"V"</span>,</span>
<span>  balance_colname <span class="op">=</span> <span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="balance_cols.html">balance_cols</a></span><span class="op">$</span><span class="va">intra_industry_balance_colname</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--sutmats">.sutmats<a class="anchor" aria-label="anchor" href="#arg--sutmats"></a></dt>
<dd><p>A named list of matrices or
an SUT-style, wide-by-matrices data frame
with columns of matrices,
including <code>R</code>, <code>U</code>, <code>V</code>, and <code>Y</code>.</p></dd>


<dt id="arg-r">R<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>Resources (<strong>R</strong>) matrix or name of the column in <code>.sutmats</code>
that contains same.
Default is "R".</p></dd>


<dt id="arg-u">U<a class="anchor" aria-label="anchor" href="#arg-u"></a></dt>
<dd><p>Use (<strong>U</strong>) matrix or name of the column in <code>.sutmats</code>
that contains same.
Default is "U".</p></dd>


<dt id="arg-v">V<a class="anchor" aria-label="anchor" href="#arg-v"></a></dt>
<dd><p>Make (<strong>V</strong>) matrix or name of the column in <code>.sutmats</code>
that contains same.
Default is "V".</p></dd>


<dt id="arg-y">Y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>Final demand (<strong>Y</strong>) matrix or name of the column in <code>.sutmats</code>
that contains same.
Default is "Y".</p></dd>


<dt id="arg-balance-colname">balance_colname<a class="anchor" aria-label="anchor" href="#arg-balance-colname"></a></dt>
<dd><p>The name of the column containing energy balance vectors.
Defaults are
<a href="balance_cols.html">balance_cols</a><code>$inter_industry_balance_colname</code> or
"SUTInterIndustryBalance"
for
<code>calc_inter_industry_balances()</code> and
<a href="balance_cols.html">balance_cols</a><code>$intra_industry_balance_colname</code> or
"SUTIntraIndustryBalance"
for
<code>calc_intra_industry_balances()</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list or data frame containing balances.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="inter-industry-balances">Inter-industry balances<a class="anchor" aria-label="anchor" href="#inter-industry-balances"></a></h3>


<p>In a PSUT description of a mass or energy conversion chain,
all of every product leaving one industry must arrive at another industry.
<code>calc_inter_industry_balances()</code>
calculates these between-industry balances via
((<strong>R</strong> + <strong>V</strong>)^T^ - (<strong>U</strong> + <strong>Y</strong>))<strong>i</strong>.
Inter-industry balances are calculated for products (not industries).</p>
</div>

<div class="section">
<h3 id="intra-industry-balances">Intra-industry balances<a class="anchor" aria-label="anchor" href="#intra-industry-balances"></a></h3>


<p><code>calc_intra_industry_balances()</code> calculates across-industry
balances via
(<strong>U</strong>^T^ - <strong>V</strong>)<strong>i</strong>.
Inter-industry balances are calculated for industries (not products),
and the result is a column vector of industry balances.</p>
</div>

<div class="section">
<h3 id="outputs">Outputs<a class="anchor" aria-label="anchor" href="#outputs"></a></h3>


<p>The argument <code>balance_colname</code> specifies the name of the
result.
By default, the output of <code>calc_inter_industry_balances()</code> is
<a href="balance_cols.html">balance_cols</a><code>$inter_industry_balance_colname</code> or
"SUTInterIndustryBalance".
By default, the output of <code>calc_intra_industry_balances()</code> is
<a href="balance_cols.html">balance_cols</a><code>$intra_industry_balance_colname</code> or
"SUTIntraIndustryBalance".</p>
<p>For inter-industry (between-industry) balances,
the result is a column vector of product balances.
The result should <strong>always</strong> be the <strong>0</strong> vector.</p>
<p>In a PSUT description of a mass or energy conversion chain,
the meaning of intra-industry (across-industry) balances
depends on the construction of the matrices.
When all losses are accounted in the matrices themselves,
the calculation of intra-industry balances for
mass and energy conversion chains should give the <strong>0</strong> vector
with industries in rows,
because mass and energy are conserved.
When losses are <strong>not</strong> accounted in the matrices,
the calculation of intra-industry balances gives losses.</p>
<p>For exergy conversion chains
(mass, energy, or both),
when losses are accounted in the matrices,
the intra-industry balance gives exergy destruction.
When losses are <strong>not</strong> accounted in the matrices,
the intra-industry balance gives the sum of
exergy destruction and exergy losses.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="verify-balances.html">verify_inter_industry_balance()</a></code> and <code><a href="verify-balances.html">verify_intra_industry_balance()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Inter-industry balances</span></span></span>
<span class="r-in"><span><span class="va">inter</span> <span class="op">&lt;-</span> <span class="va">UKEnergy2000mats</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">LastStage</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Final"</span>, <span class="st">"Useful"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">matrix.name</span>, values_from <span class="op">=</span> <span class="va">matrix</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">calc_inter_industry_balance</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">inter</span><span class="op">[[</span><span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="balance_cols.html">balance_cols</a></span><span class="op">$</span><span class="va">inter_industry_balance_colname</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     Industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude                      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude [from Dist.]         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude [from Fields]        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Diesel                     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Diesel [from Dist.]        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Elect                      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Elect [from Grid]          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NG                         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NG [from Dist.]            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NG [from Wells]            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Petrol                     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Petrol [from Dist.]        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Product"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industry"</span>
<span class="r-in"><span><span class="va">inter</span><span class="op">[[</span><span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="balance_cols.html">balance_cols</a></span><span class="op">$</span><span class="va">inter_industry_balance_colname</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             Industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude                   0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude [from Dist.]      0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude [from Fields]     0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Diesel                  0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Diesel [from Dist.]     0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Elect                   0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Elect [from Grid]       0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LTH                     0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Light                   0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MD [from Car engines]   0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MD [from Truck engines] 2.273737e-13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NG                      0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NG [from Dist.]         0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NG [from Wells]         0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Petrol                  0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Petrol [from Dist.]     0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Product"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industry"</span>
<span class="r-in"><span><span class="co"># Intra-industry balances</span></span></span>
<span class="r-in"><span><span class="va">intra</span> <span class="op">&lt;-</span> <span class="va">UKEnergy2000mats</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">LastStage</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Final"</span>, <span class="st">"Useful"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">matrix.name</span>, values_from <span class="op">=</span> <span class="va">matrix</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">calc_intra_industry_balance</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">intra</span><span class="op">[[</span><span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="balance_cols.html">balance_cols</a></span><span class="op">$</span><span class="va">intra_industry_balance_colname</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   Product</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude dist.           550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Diesel dist.          350</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Elect. grid           125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Gas wells &amp; proc.    2075</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NG dist.               50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Oil fields           2575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Oil refineries       5075</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Petrol dist.          750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Power plants         9700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industry"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Product"</span>
<span class="r-in"><span><span class="va">intra</span><span class="op">[[</span><span class="fu">Recca</span><span class="fu">::</span><span class="va"><a href="balance_cols.html">balance_cols</a></span><span class="op">$</span><span class="va">intra_industry_balance_colname</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      Product</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Car engines       22999.6000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Crude dist.         545.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Diesel dist.        367.9998</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Elect. grid         125.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Furnaces           5000.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Gas wells &amp; proc.  2075.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Light fixtures     4800.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NG dist.             45.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Oil fields         2575.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Oil refineries     5075.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Petrol dist.        526.9997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Power plants       9700.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Truck engines     13250.0200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"rowtype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Industry"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"coltype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Product"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Heun, Emmanuel Aramendia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

